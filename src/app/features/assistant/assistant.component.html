<div class="w-full max-w-[1200px] flex flex-col gap-4">
  <div class="flex items-center justify-between gap-3 text-xs uppercase tracking-[0.2em] text-[#64748b]">
    <a class="text-[11px] font-semibold tracking-[0.2em] uppercase text-[#64748b] no-underline"
      routerLink="/survey">Atras</a>
    <span>Asistente IA</span>
    <span
      class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-[rgba(0,230,0,0.15)] text-[#166534] text-[11px] font-semibold">Chat</span>
  </div>

  <div
    class="bg-white border border-[rgba(148,163,184,0.25)] rounded-[22px] p-[18px] shadow-[0_18px_40px_rgba(15,23,42,0.12)] animate-float-in flex flex-col gap-3.5">
    <div class="flex justify-between items-center gap-3">
      <div>
        <p class="text-sm font-bold m-0 mb-1">Asistente Fundejar</p>
        <p class="text-[11px] text-[#64748b] m-0">Soporte en tiempo real</p>
      </div>
      <span class="text-[10px] uppercase tracking-[0.2em] text-[#16a34a]">En linea</span>
    </div>

    <div class="flex flex-col gap-2.5 max-h-80 overflow-y-auto pr-1">
      <div *ngFor="let message of messages()"
        class="self-start bg-[#f1f5f9] rounded-[16px_16px_16px_6px] p-[10px_12px] text-[13px] text-[#0f172a] max-w-[80%]"
        [class.self-end]="message.role === 'user'" [class.bg-[rgba(0,230,0,0.18)]]="message.role === 'user'"
        [class.rounded-[16px_16px_6px_16px]]="message.role === 'user'">
        {{ message.text }}
      </div>
      <div class="text-[11px] text-[#64748b]" *ngIf="isTyping()">Escribiendo...</div>
    </div>

    <div class="flex gap-2 flex-wrap">
      <button *ngFor="let reply of quickReplies" type="button"
        class="border border-[#e2e8f0] rounded-full px-3 py-1.5 text-[11px] font-semibold bg-white cursor-pointer"
        (click)="sendQuick(reply)">
        {{ reply }}
      </button>
    </div>

    <div class="grid grid-cols-[1fr_auto] gap-2.5 items-center">
      <input
        class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
        type="text" placeholder="Escribe un mensaje" [(ngModel)]="draft" (keyup.enter)="send()" />
      <button class="border-none rounded-2xl py-2.5 px-4 bg-[#00e600] text-[#033c03] font-bold cursor-pointer"
        type="button" (click)="send()">Enviar</button>
    </div>
  </div>
</div>