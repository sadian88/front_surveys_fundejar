<div class="w-full max-w-[1200px] flex flex-col gap-4">
  <div class="flex items-center justify-between gap-3 text-xs uppercase tracking-[0.2em] text-[#64748b]">
    <a class="text-[11px] font-semibold tracking-[0.2em] uppercase text-[#64748b] no-underline"
      routerLink="/access">Atras</a>
    <span>Registro</span>
  </div>

  <div
    class="bg-white border border-[rgba(148,163,184,0.25)] rounded-[22px] p-[18px] shadow-[0_18px_40px_rgba(15,23,42,0.12)] animate-float-in flex flex-col gap-5"
    *ngIf="isLoading">
    <p class="text-[13px] text-[#64748b] m-0">Cargando registro...</p>
  </div>

  <div
    class="bg-white border border-[rgba(148,163,184,0.25)] rounded-[22px] p-[18px] shadow-[0_18px_40px_rgba(15,23,42,0.12)] animate-float-in flex flex-col gap-5"
    *ngIf="!isLoading">
    <div class="flex items-start justify-between gap-3">
      <div>
        <h1 class="text-[22px] font-bold m-0">{{ isEdit ? 'Editar Registro' : 'Registro de Usuario Nuevo' }}</h1>
        <p class="text-[13px] text-[#64748b] m-0">Complete el perfil para continuar con la encuesta.</p>
      </div>
      <span
        class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-[rgba(0,230,0,0.15)] text-[#166534] text-[11px] font-semibold">{{
        progressValue }}%</span>
    </div>

    <div class="flex flex-col gap-8">
      <!-- Sección 1: Identificación y Nombres -->
      <section class="flex flex-col gap-4">
        <div class="flex items-center gap-2.5">
          <span class="w-8 h-8 rounded-[10px] bg-[rgba(0,230,0,0.15)] text-[#00e600] grid place-items-center">
            <svg class="w-[18px] h-[18px] fill-current" viewBox="0 0 24 24">
              <path
                d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
            </svg>
          </span>
          <div>
            <h3 class="text-[15px] font-bold m-0 text-[#0f172a]">Identificación y Nombres</h3>
            <p class="text-xs text-[#94a3b8] m-0">Datos básicos de identidad</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Tipo de
              documento</label>
            <select
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              [(ngModel)]="form.documentType">
              <option value="IDENTIDAD">Documento de identidad</option>
              <option value="CEDULA">Cedula</option>
              <option value="PASAPORTE">Pasaporte</option>
              <option value="PEP">PEP</option>
            </select>
          </div>
          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Número de
              Documento</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="text" placeholder="Ej: 12345678" [(ngModel)]="form.documentNumber" />
          </div>
          <div class="hidden lg:block"></div> <!-- Spacer -->

          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Primer
              Nombre</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="text" placeholder="Ej: Juan" [(ngModel)]="form.firstName" />
          </div>
          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Segundo
              Nombre</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="text" placeholder="Opcional" [(ngModel)]="form.middleName" />
          </div>
          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Apellidos
              Completos</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="text" placeholder="Ej: Pérez García" [(ngModel)]="form.lastName" />
          </div>
        </div>
      </section>

      <!-- Sección 2: Información Biográfica -->
      <section class="flex flex-col gap-4 pt-4 border-t border-[rgba(148,163,184,0.1)]">
        <div class="flex items-center gap-2.5">
          <span class="w-8 h-8 rounded-[10px] bg-[rgba(0,230,0,0.15)] text-[#00e600] grid place-items-center">
            <svg class="w-[18px] h-[18px] fill-current" viewBox="0 0 24 24">
              <path
                d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
            </svg>
          </span>
          <div>
            <h3 class="text-[15px] font-bold m-0 text-[#0f172a]">Información Biográfica</h3>
            <p class="text-xs text-[#94a3b8] m-0">Detalles personales adicionales</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div>
            <label
              class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Nacionalidad</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="text" placeholder="Ej: Colombiana" [(ngModel)]="form.nationality" />
          </div>
          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Fecha de
              Nacimiento</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="date" [(ngModel)]="form.birthDate" (change)="onBirthDateChange()" />
          </div>
          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Edad</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="number" placeholder="Ej: 28" [(ngModel)]="form.age" />
          </div>
          <div>
            <label
              class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Género</label>
            <select
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              [(ngModel)]="form.gender">
              <option [ngValue]="undefined">Seleccione</option>
              <option value="FEMENINO">Femenino</option>
              <option value="MASCULINO">Masculino</option>
              <option value="OTRO">Otro</option>
            </select>
          </div>
        </div>
      </section>

      <!-- Sección 3: Contacto -->
      <section class="flex flex-col gap-4 pt-4 border-t border-[rgba(148,163,184,0.1)]">
        <div class="flex items-center gap-2.5">
          <span class="w-8 h-8 rounded-[10px] bg-[rgba(0,230,0,0.15)] text-[#00e600] grid place-items-center">
            <svg class="w-[18px] h-[18px] fill-current" viewBox="0 0 24 24">
              <path
                d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
            </svg>
          </span>
          <div>
            <h3 class="text-[15px] font-bold m-0 text-[#0f172a]">Canales de Contacto</h3>
            <p class="text-xs text-[#94a3b8] m-0">¿Cómo podemos comunicarnos?</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <div class="md:col-span-2 lg:col-span-1">
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Correo
              Electrónico</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="email" placeholder="usuario@correo.com" [(ngModel)]="form.email" />
          </div>
          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Teléfono
              Principal</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="tel" placeholder="Ej: 300 000 0000" [(ngModel)]="form.phonePrimary" />
          </div>
          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Teléfono
              Alternativo</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="tel" placeholder="Opcional" [(ngModel)]="form.phoneSecondary" />
          </div>
          <div class="md:col-span-2 lg:col-span-3">
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Dirección de
              Residencia</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="text" placeholder="Calle, carrera, barrio, ciudad" [(ngModel)]="form.address" />
          </div>
        </div>
      </section>

      <!-- Sección 4: Emprendimiento -->
      <section class="flex flex-col gap-4 pt-4 border-t border-[rgba(148,163,184,0.1)]">
        <div class="flex items-center gap-2.5">
          <span class="w-8 h-8 rounded-[10px] bg-[rgba(0,230,0,0.15)] text-[#00e600] grid place-items-center">
            <svg class="w-[18px] h-[18px] fill-current" viewBox="0 0 24 24">
              <path
                d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z" />
            </svg>
          </span>
          <div>
            <h3 class="text-[15px] font-bold m-0 text-[#0f172a]">Proyecto de Negocio</h3>
            <p class="text-xs text-[#94a3b8] m-0">Cuéntanos sobre tu emprendimiento</p>
          </div>
        </div>

        <div class="grid grid-cols-1 gap-4">
          <div>
            <label class="text-[11px] font-semibold uppercase tracking-[0.2em] text-[#94a3b8] mb-1.5 block">Nombre del
              Emprendimiento</label>
            <input
              class="w-full rounded-[14px] border border-[#e2e8f0] p-[12px_14px] text-sm bg-white text-[#0f172a] outline-none transition-all focus:border-[#00e600] focus:shadow-[0_0_0_3px_rgba(0,230,0,0.15)]"
              type="text" placeholder="Ej: Panaderia El Sol" [(ngModel)]="form.ventureName" />
          </div>
        </div>
      </section>
    </div>

    <div class="flex flex-col gap-4 pt-3 border-t border-[rgba(148,163,184,0.2)]">
      <label class="flex items-center gap-2 text-xs text-[#64748b]">
        <input class="w-4 h-4 accent-[#00e600]" type="checkbox" />
        <span>Acepto los <a class="text-[#16a34a] font-semibold no-underline" routerLink="/assistant">terminos y
            condiciones</a> y la politica de privacidad.</span>
      </label>
      <div class="flex gap-3 items-center justify-end flex-wrap">
        <a class="w-full sm:w-auto inline-flex items-center justify-center py-2.5 px-[18px] border border-[#cbd5e1] rounded-2xl text-sm font-semibold text-[#1e293b] bg-white cursor-pointer no-underline"
          routerLink="/access">Cancelar</a>
        <button
          class="w-full sm:w-auto sm:min-w-[180px] border-none rounded-2xl py-3 px-4 text-[15px] font-bold bg-[#00e600] text-[#032f03] cursor-pointer shadow-[0_12px_20px_rgba(0,230,0,0.25)] transition-all hover:-translate-y-0.5 hover:shadow-[0_16px_28px_rgba(0,230,0,0.28)] disabled:opacity-60 disabled:cursor-not-allowed"
          type="button" (click)="register()" [disabled]="isSaving">
          {{ isSaving ? 'Guardando...' : (isEdit ? 'Actualizar' : 'Registrarme') }}
        </button>
      </div>
    </div>
    <p class="text-xs text-[#dc2626] m-0" *ngIf="errorMessage">{{ errorMessage }}</p>
  </div>
</div>